<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN"
    "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
<meta http-equiv="Content-Type" content="application/xhtml+xml; charset=UTF-8" />
<meta name="generator" content="AsciiDoc 8.6.8" />
<title>The ghc-vis User Guide</title>
<style type="text/css">
/* Shared CSS for AsciiDoc xhtml11 and html5 backends */

/* Default font. */
body {
  font-family: Georgia,serif;
}

/* Title font. */
h1, h2, h3, h4, h5, h6,
div.title, caption.title,
thead, p.table.header,
#toctitle,
#author, #revnumber, #revdate, #revremark,
#footer {
  font-family: Arial,Helvetica,sans-serif;
}

body {
  margin: 1em 5% 1em 5%;
}

a {
  color: blue;
  text-decoration: underline;
}
a:visited {
  color: fuchsia;
}

em {
  font-style: italic;
  color: navy;
}

strong {
  font-weight: bold;
  color: #083194;
}

h1, h2, h3, h4, h5, h6 {
  color: #527bbd;
  margin-top: 1.2em;
  margin-bottom: 0.5em;
  line-height: 1.3;
}

h1, h2, h3 {
  border-bottom: 2px solid silver;
}
h2 {
  padding-top: 0.5em;
}
h3 {
  float: left;
}
h3 + * {
  clear: left;
}
h5 {
  font-size: 1.0em;
}

div.sectionbody {
  margin-left: 0;
}

hr {
  border: 1px solid silver;
}

p {
  margin-top: 0.5em;
  margin-bottom: 0.5em;
}

ul, ol, li > p {
  margin-top: 0;
}
ul > li     { color: #aaa; }
ul > li > * { color: black; }

.monospaced, code, pre {
  font-family: "Courier New", Courier, monospace;
  font-size: inherit;
  color: navy;
  padding: 0;
  margin: 0;
}


#author {
  color: #527bbd;
  font-weight: bold;
  font-size: 1.1em;
}
#email {
}
#revnumber, #revdate, #revremark {
}

#footer {
  font-size: small;
  border-top: 2px solid silver;
  padding-top: 0.5em;
  margin-top: 4.0em;
}
#footer-text {
  float: left;
  padding-bottom: 0.5em;
}
#footer-badges {
  float: right;
  padding-bottom: 0.5em;
}

#preamble {
  margin-top: 1.5em;
  margin-bottom: 1.5em;
}
div.imageblock, div.exampleblock, div.verseblock,
div.quoteblock, div.literalblock, div.listingblock, div.sidebarblock,
div.admonitionblock {
  margin-top: 1.0em;
  margin-bottom: 1.5em;
}
div.admonitionblock {
  margin-top: 2.0em;
  margin-bottom: 2.0em;
  margin-right: 10%;
  color: #606060;
}

div.content { /* Block element content. */
  padding: 0;
}

/* Block element titles. */
div.title, caption.title {
  color: #527bbd;
  font-weight: bold;
  text-align: left;
  margin-top: 1.0em;
  margin-bottom: 0.5em;
}
div.title + * {
  margin-top: 0;
}

td div.title:first-child {
  margin-top: 0.0em;
}
div.content div.title:first-child {
  margin-top: 0.0em;
}
div.content + div.title {
  margin-top: 0.0em;
}

div.sidebarblock > div.content {
  background: #ffffee;
  border: 1px solid #dddddd;
  border-left: 4px solid #f0f0f0;
  padding: 0.5em;
}

div.listingblock > div.content {
  border: 1px solid #dddddd;
  border-left: 5px solid #f0f0f0;
  background: #f8f8f8;
  padding: 0.5em;
}

div.quoteblock, div.verseblock {
  padding-left: 1.0em;
  margin-left: 1.0em;
  margin-right: 10%;
  border-left: 5px solid #f0f0f0;
  color: #888;
}

div.quoteblock > div.attribution {
  padding-top: 0.5em;
  text-align: right;
}

div.verseblock > pre.content {
  font-family: inherit;
  font-size: inherit;
}
div.verseblock > div.attribution {
  padding-top: 0.75em;
  text-align: left;
}
/* DEPRECATED: Pre version 8.2.7 verse style literal block. */
div.verseblock + div.attribution {
  text-align: left;
}

div.admonitionblock .icon {
  vertical-align: top;
  font-size: 1.1em;
  font-weight: bold;
  text-decoration: underline;
  color: #527bbd;
  padding-right: 0.5em;
}
div.admonitionblock td.content {
  padding-left: 0.5em;
  border-left: 3px solid #dddddd;
}

div.exampleblock > div.content {
  border-left: 3px solid #dddddd;
  padding-left: 0.5em;
}

div.imageblock div.content { padding-left: 0; }
span.image img { border-style: none; }
a.image:visited { color: white; }

dl {
  margin-top: 0.8em;
  margin-bottom: 0.8em;
}
dt {
  margin-top: 0.5em;
  margin-bottom: 0;
  font-style: normal;
  color: navy;
}
dd > *:first-child {
  margin-top: 0.1em;
}

ul, ol {
    list-style-position: outside;
}
ol.arabic {
  list-style-type: decimal;
}
ol.loweralpha {
  list-style-type: lower-alpha;
}
ol.upperalpha {
  list-style-type: upper-alpha;
}
ol.lowerroman {
  list-style-type: lower-roman;
}
ol.upperroman {
  list-style-type: upper-roman;
}

div.compact ul, div.compact ol,
div.compact p, div.compact p,
div.compact div, div.compact div {
  margin-top: 0.1em;
  margin-bottom: 0.1em;
}

tfoot {
  font-weight: bold;
}
td > div.verse {
  white-space: pre;
}

div.hdlist {
  margin-top: 0.8em;
  margin-bottom: 0.8em;
}
div.hdlist tr {
  padding-bottom: 15px;
}
dt.hdlist1.strong, td.hdlist1.strong {
  font-weight: bold;
}
td.hdlist1 {
  vertical-align: top;
  font-style: normal;
  padding-right: 0.8em;
  color: navy;
}
td.hdlist2 {
  vertical-align: top;
}
div.hdlist.compact tr {
  margin: 0;
  padding-bottom: 0;
}

.comment {
  background: yellow;
}

.footnote, .footnoteref {
  font-size: 0.8em;
}

span.footnote, span.footnoteref {
  vertical-align: super;
}

#footnotes {
  margin: 20px 0 20px 0;
  padding: 7px 0 0 0;
}

#footnotes div.footnote {
  margin: 0 0 5px 0;
}

#footnotes hr {
  border: none;
  border-top: 1px solid silver;
  height: 1px;
  text-align: left;
  margin-left: 0;
  width: 20%;
  min-width: 100px;
}

div.colist td {
  padding-right: 0.5em;
  padding-bottom: 0.3em;
  vertical-align: top;
}
div.colist td img {
  margin-top: 0.3em;
}

@media print {
  #footer-badges { display: none; }
}

#toc {
  margin-bottom: 2.5em;
}

#toctitle {
  color: #527bbd;
  font-size: 1.1em;
  font-weight: bold;
  margin-top: 1.0em;
  margin-bottom: 0.1em;
}

div.toclevel0, div.toclevel1, div.toclevel2, div.toclevel3, div.toclevel4 {
  margin-top: 0;
  margin-bottom: 0;
}
div.toclevel2 {
  margin-left: 2em;
  font-size: 0.9em;
}
div.toclevel3 {
  margin-left: 4em;
  font-size: 0.9em;
}
div.toclevel4 {
  margin-left: 6em;
  font-size: 0.9em;
}

span.aqua { color: aqua; }
span.black { color: black; }
span.blue { color: blue; }
span.fuchsia { color: fuchsia; }
span.gray { color: gray; }
span.green { color: green; }
span.lime { color: lime; }
span.maroon { color: maroon; }
span.navy { color: navy; }
span.olive { color: olive; }
span.purple { color: purple; }
span.red { color: red; }
span.silver { color: silver; }
span.teal { color: teal; }
span.white { color: white; }
span.yellow { color: yellow; }

span.aqua-background { background: aqua; }
span.black-background { background: black; }
span.blue-background { background: blue; }
span.fuchsia-background { background: fuchsia; }
span.gray-background { background: gray; }
span.green-background { background: green; }
span.lime-background { background: lime; }
span.maroon-background { background: maroon; }
span.navy-background { background: navy; }
span.olive-background { background: olive; }
span.purple-background { background: purple; }
span.red-background { background: red; }
span.silver-background { background: silver; }
span.teal-background { background: teal; }
span.white-background { background: white; }
span.yellow-background { background: yellow; }

span.big { font-size: 2em; }
span.small { font-size: 0.6em; }

span.underline { text-decoration: underline; }
span.overline { text-decoration: overline; }
span.line-through { text-decoration: line-through; }

div.unbreakable { page-break-inside: avoid; }


/*
 * xhtml11 specific
 *
 * */

div.tableblock {
  margin-top: 1.0em;
  margin-bottom: 1.5em;
}
div.tableblock > table {
  border: 3px solid #527bbd;
}
thead, p.table.header {
  font-weight: bold;
  color: #527bbd;
}
p.table {
  margin-top: 0;
}
/* Because the table frame attribute is overriden by CSS in most browsers. */
div.tableblock > table[frame="void"] {
  border-style: none;
}
div.tableblock > table[frame="hsides"] {
  border-left-style: none;
  border-right-style: none;
}
div.tableblock > table[frame="vsides"] {
  border-top-style: none;
  border-bottom-style: none;
}


/*
 * html5 specific
 *
 * */

table.tableblock {
  margin-top: 1.0em;
  margin-bottom: 1.5em;
}
thead, p.tableblock.header {
  font-weight: bold;
  color: #527bbd;
}
p.tableblock {
  margin-top: 0;
}
table.tableblock {
  border-width: 3px;
  border-spacing: 0px;
  border-style: solid;
  border-color: #527bbd;
  border-collapse: collapse;
}
th.tableblock, td.tableblock {
  border-width: 1px;
  padding: 4px;
  border-style: solid;
  border-color: #527bbd;
}

table.tableblock.frame-topbot {
  border-left-style: hidden;
  border-right-style: hidden;
}
table.tableblock.frame-sides {
  border-top-style: hidden;
  border-bottom-style: hidden;
}
table.tableblock.frame-none {
  border-style: hidden;
}

th.tableblock.halign-left, td.tableblock.halign-left {
  text-align: left;
}
th.tableblock.halign-center, td.tableblock.halign-center {
  text-align: center;
}
th.tableblock.halign-right, td.tableblock.halign-right {
  text-align: right;
}

th.tableblock.valign-top, td.tableblock.valign-top {
  vertical-align: top;
}
th.tableblock.valign-middle, td.tableblock.valign-middle {
  vertical-align: middle;
}
th.tableblock.valign-bottom, td.tableblock.valign-bottom {
  vertical-align: bottom;
}


/*
 * manpage specific
 *
 * */

body.manpage h1 {
  padding-top: 0.5em;
  padding-bottom: 0.5em;
  border-top: 2px solid silver;
  border-bottom: 2px solid silver;
}
body.manpage h2 {
  border-style: none;
}
body.manpage div.sectionbody {
  margin-left: 3em;
}

@media print {
  body.manpage div#toc { display: none; }
}


@media screen {
  body {
    max-width: 50em; /* approximately 80 characters wide */
    margin-left: 16em;
  }

  #toc {
    position: fixed;
    top: 0;
    left: 0;
    bottom: 0;
    width: 13em;
    padding: 0.5em;
    padding-bottom: 1.5em;
    margin: 0;
    overflow: auto;
    border-right: 3px solid #f8f8f8;
    background-color: white;
  }

  #toc .toclevel1 {
    margin-top: 0.5em;
  }

  #toc .toclevel2 {
    margin-top: 0.25em;
    display: list-item;
    color: #aaaaaa;
  }

  #toctitle {
    margin-top: 0.5em;
  }
}
</style>
<script type="text/javascript">
/*<![CDATA[*/
var asciidoc = {  // Namespace.

/////////////////////////////////////////////////////////////////////
// Table Of Contents generator
/////////////////////////////////////////////////////////////////////

/* Author: Mihai Bazon, September 2002
 * http://students.infoiasi.ro/~mishoo
 *
 * Table Of Content generator
 * Version: 0.4
 *
 * Feel free to use this script under the terms of the GNU General Public
 * License, as long as you do not remove or alter this notice.
 */

 /* modified by Troy D. Hanson, September 2006. License: GPL */
 /* modified by Stuart Rackham, 2006, 2009. License: GPL */

// toclevels = 1..4.
toc: function (toclevels) {

  function getText(el) {
    var text = "";
    for (var i = el.firstChild; i != null; i = i.nextSibling) {
      if (i.nodeType == 3 /* Node.TEXT_NODE */) // IE doesn't speak constants.
        text += i.data;
      else if (i.firstChild != null)
        text += getText(i);
    }
    return text;
  }

  function TocEntry(el, text, toclevel) {
    this.element = el;
    this.text = text;
    this.toclevel = toclevel;
  }

  function tocEntries(el, toclevels) {
    var result = new Array;
    var re = new RegExp('[hH]([1-'+(toclevels+1)+'])');
    // Function that scans the DOM tree for header elements (the DOM2
    // nodeIterator API would be a better technique but not supported by all
    // browsers).
    var iterate = function (el) {
      for (var i = el.firstChild; i != null; i = i.nextSibling) {
        if (i.nodeType == 1 /* Node.ELEMENT_NODE */) {
          var mo = re.exec(i.tagName);
          if (mo && (i.getAttribute("class") || i.getAttribute("className")) != "float") {
            result[result.length] = new TocEntry(i, getText(i), mo[1]-1);
          }
          iterate(i);
        }
      }
    }
    iterate(el);
    return result;
  }

  var toc = document.getElementById("toc");
  if (!toc) {
    return;
  }

  // Delete existing TOC entries in case we're reloading the TOC.
  var tocEntriesToRemove = [];
  var i;
  for (i = 0; i < toc.childNodes.length; i++) {
    var entry = toc.childNodes[i];
    if (entry.nodeName.toLowerCase() == 'div'
     && entry.getAttribute("class")
     && entry.getAttribute("class").match(/^toclevel/))
      tocEntriesToRemove.push(entry);
  }
  for (i = 0; i < tocEntriesToRemove.length; i++) {
    toc.removeChild(tocEntriesToRemove[i]);
  }

  // Rebuild TOC entries.
  var entries = tocEntries(document.getElementById("content"), toclevels);
  for (var i = 0; i < entries.length; ++i) {
    var entry = entries[i];
    if (entry.element.id == "")
      entry.element.id = "_toc_" + i;
    var a = document.createElement("a");
    a.href = "#" + entry.element.id;
    a.appendChild(document.createTextNode(entry.text));
    var div = document.createElement("div");
    div.appendChild(a);
    div.className = "toclevel" + entry.toclevel;
    toc.appendChild(div);
  }
  if (entries.length == 0)
    toc.parentNode.removeChild(toc);
},


/////////////////////////////////////////////////////////////////////
// Footnotes generator
/////////////////////////////////////////////////////////////////////

/* Based on footnote generation code from:
 * http://www.brandspankingnew.net/archive/2005/07/format_footnote.html
 */

footnotes: function () {
  // Delete existing footnote entries in case we're reloading the footnodes.
  var i;
  var noteholder = document.getElementById("footnotes");
  if (!noteholder) {
    return;
  }
  var entriesToRemove = [];
  for (i = 0; i < noteholder.childNodes.length; i++) {
    var entry = noteholder.childNodes[i];
    if (entry.nodeName.toLowerCase() == 'div' && entry.getAttribute("class") == "footnote")
      entriesToRemove.push(entry);
  }
  for (i = 0; i < entriesToRemove.length; i++) {
    noteholder.removeChild(entriesToRemove[i]);
  }

  // Rebuild footnote entries.
  var cont = document.getElementById("content");
  var spans = cont.getElementsByTagName("span");
  var refs = {};
  var n = 0;
  for (i=0; i<spans.length; i++) {
    if (spans[i].className == "footnote") {
      n++;
      var note = spans[i].getAttribute("data-note");
      if (!note) {
        // Use [\s\S] in place of . so multi-line matches work.
        // Because JavaScript has no s (dotall) regex flag.
        note = spans[i].innerHTML.match(/\s*\[([\s\S]*)]\s*/)[1];
        spans[i].innerHTML =
          "[<a id='_footnoteref_" + n + "' href='#_footnote_" + n +
          "' title='View footnote' class='footnote'>" + n + "</a>]";
        spans[i].setAttribute("data-note", note);
      }
      noteholder.innerHTML +=
        "<div class='footnote' id='_footnote_" + n + "'>" +
        "<a href='#_footnoteref_" + n + "' title='Return to text'>" +
        n + "</a>. " + note + "</div>";
      var id =spans[i].getAttribute("id");
      if (id != null) refs["#"+id] = n;
    }
  }
  if (n == 0)
    noteholder.parentNode.removeChild(noteholder);
  else {
    // Process footnoterefs.
    for (i=0; i<spans.length; i++) {
      if (spans[i].className == "footnoteref") {
        var href = spans[i].getElementsByTagName("a")[0].getAttribute("href");
        href = href.match(/#.*/)[0];  // Because IE return full URL.
        n = refs[href];
        spans[i].innerHTML =
          "[<a href='#_footnote_" + n +
          "' title='View footnote' class='footnote'>" + n + "</a>]";
      }
    }
  }
},

install: function(toclevels) {
  var timerId;

  function reinstall() {
    asciidoc.footnotes();
    if (toclevels) {
      asciidoc.toc(toclevels);
    }
  }

  function reinstallAndRemoveTimer() {
    clearInterval(timerId);
    reinstall();
  }

  timerId = setInterval(reinstall, 500);
  if (document.addEventListener)
    document.addEventListener("DOMContentLoaded", reinstallAndRemoveTimer, false);
  else
    window.onload = reinstallAndRemoveTimer;
}

}
asciidoc.install(2);
/*]]>*/
</script>
</head>
<body class="article">
<div id="header">
<h1>The ghc-vis User Guide</h1>
<span id="author">Dennis Felsing</span><br />
<span id="email"><code>&lt;<a href="mailto:dennis@felsin9.de">dennis@felsin9.de</a>&gt;</code></span><br />
<span id="revdate">June 2013</span>
<div id="toc">
  <div id="toctitle">Table of Contents</div>
  <noscript><p><b>JavaScript must be enabled in your browser to display the table of contents.</b></p></noscript>
</div>
</div>
<div id="content">
<div id="preamble">
<div class="sectionbody">
<div class="paragraph"><p>ghc-vis is a tool to visualize live Haskell data structures in GHCi.
Evaluation is not forced and you can interact with the visualized data
structures. This allows seeing Haskell&#8217;s lazy evaluation and sharing in
action.</p></div>
</div>
</div>
<div class="sect1">
<h2 id="_introduction">Introduction</h2>
<div class="sectionbody">
<div class="paragraph"><p>Functional programming languages like Haskell offer a way to write
well-structured software, which is easy to understand and still performs well.
In order to achieve this one has to be able to consciously use features that
result from the paradigm of functional programming.</p></div>
<div class="paragraph"><p>ghc-vis is a tool for visualizing two features of this kind, namely lazy
evaluation and sharing, in a way that can be used in the (self-)teaching of
Haskell and the development and debugging of Haskell software.</p></div>
<div class="paragraph"><p>A common example for the power of lazy evaluation are infinite data
structures. They are easy to define and convenient to use in Haskell. We can
write</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 3.1.7
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>ones <span style="color: #990000">=</span> <span style="color: #990000">[</span><span style="color: #993399">1</span><span style="color: #990000">,</span><span style="color: #993399">1</span><span style="color: #990000">..]</span></tt></pre></div></div>
<div class="paragraph"><p>to construct an infinite list of 1s, which we can now access by the suggestive
name <em>ones</em>. How does this work? Clearly the entire list can’t be stored in
memory as we do not possess the infinite tape of a turing machine.</p></div>
<div class="paragraph"><p>We can write a function to retrieve the nth member of a list:</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 3.1.7
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>at <span style="color: #993399">0</span> <span style="color: #990000">(</span>x<span style="color: #990000">:</span>xs<span style="color: #990000">)</span> <span style="color: #990000">=</span> x
at n <span style="color: #990000">(</span>x<span style="color: #990000">:</span>xs<span style="color: #990000">)</span> <span style="color: #990000">=</span> at <span style="color: #990000">(</span>n<span style="color: #990000">-</span><span style="color: #993399">1</span><span style="color: #990000">)</span> xs</tt></pre></div></div>
<div class="paragraph"><p>Evaluating <em>at 1 ones</em> extracts the second member of the list <em>ones</em>, which
gives us the integer 1. In the same manner <em>at 2 ones</em> and <em>at 3 ones</em> give us
1. But what is happening to the infinite list of ones as we access its
members?</p></div>
<div class="tableblock">
<table rules="none"
width="100%"
frame="void"
cellspacing="0" cellpadding="4">
<col width="33%" />
<col width="33%" />
<col width="33%" />
<tbody>
<tr>
<td align="left" valign="top"><p class="table">After <em>at 1 ones</em>:</p></td>
<td align="left" valign="top"><p class="table">After <em>at 2 ones</em>:</p></td>
<td align="left" valign="top"><p class="table">After <em>at 3 ones</em>:</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table"><span class="image">
<img src="intro1-1.svg" alt="intro1-1.svg" width="263" height="280" />
</span></p></td>
<td align="left" valign="top"><p class="table"><span class="image">
<img src="intro1-2.svg" alt="intro1-2.svg" width="328" height="343" />
</span></p></td>
<td align="left" valign="top"><p class="table"><span class="image">
<img src="intro1-3.svg" alt="intro1-3.svg" width="393" height="407" />
</span></p></td>
</tr>
</tbody>
</table>
</div>
<div class="paragraph"><p>This time no big list is constructed in memory, instead a list is created that
references itself as the rest of the list.</p></div>
</div>
</div>
<div class="sect1">
<h2 id="_basic_usage">Basic usage</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_installation">Installation</h3>
<div class="paragraph"><p>More specific installation instructions can be found here:</p></div>
<div class="ulist"><ul>
<li>
<p>
<a href="installing-archlinux">Arch Linux</a>
</p>
</li>
<li>
<p>
<a href="installing-gentoo">Gentoo Linux</a>
</p>
</li>
<li>
<p>
<a href="installing-osx">Mac OS X 10.8</a>
</p>
</li>
<li>
<p>
<a href="installing-windows">Windows 7</a>
</p>
</li>
</ul></div>
<div class="paragraph"><p>The <a href="http://hackage.haskell.org/package/ghc-vis">package</a> is available on
Hackage. Install it like this:</p></div>
<div class="listingblock">
<div class="content">
<pre><code>$ cabal install ghc-vis</code></pre>
</div></div>
<div class="paragraph"><p>Follow the instructions in the output of <code>cabal install ghc-vis</code> to setup the
ghci script.</p></div>
<div class="paragraph"><p>You need GTK, Cairo, Pango, Graphviz and their corresponding Haskell library
bindings. If you run into any problems, try this:</p></div>
<div class="listingblock">
<div class="content">
<pre><code>$ cabal update
$ cabal install gtk2hs-buildtools</code></pre>
</div></div>
<div class="paragraph"><p>Another common problem is library profiling, which is not supported by
ghc-vis. You can disable it globally in your cabal config by setting
<em>library-profiling</em> to <em>False</em> in <code>~/.cabal/config</code>. If you only want to
install ghc-vis without library profiling run the following:</p></div>
<div class="listingblock">
<div class="content">
<pre><code>$ cabal install ghc-vis --disable-library-profiling</code></pre>
</div></div>
</div>
<div class="sect2">
<h3 id="_interactive_usage">Interactive Usage</h3>
<div class="paragraph"><p>Now you can run <code>ghci</code> and experiment with ghc-vis. Start the visualization:</p></div>
<div class="listingblock">
<div class="content">
<pre><code>$ ghci
GHCi, version 7.6.3: http://www.haskell.org/ghc/  :? for help
λ&gt; :vis</code></pre>
</div></div>
<div class="paragraph"><p>A window should appear now. This is the visualization window:</p></div>
<div class="paragraph"><p><span class="image">
<img src="window.png" alt="window.png" width="416" height="379" />
</span></p></div>
<div class="paragraph"><p>Add an expression to the visualization:</p></div>
<div class="listingblock">
<div class="content">
<pre><code>λ&gt; let a = [1..3]
λ&gt; :view a
λ&gt; let b = cycle a
λ&gt; :view b
λ&gt; :view "foo" ++ "bar"</code></pre>
</div></div>
<div class="paragraph"><p>You should now see something similar to this:</p></div>
<div class="paragraph"><p><span class="image">
<img src="1.svg" alt="1.svg" width="601" height="148" />
</span></p></div>
<div class="paragraph"><p>Thunks are red, Functions are yellow, named objects are green and links to an
already shown object are blue.</p></div>
<div class="paragraph"><p>Notice how <em>a</em> is referenced by <em>b</em>.</p></div>
<div class="paragraph"><p>Evaluate an object that is shown in the visualization. You can also click on
the object to evaluate it. Only thunks, which are named starting with a <em>t</em>,
can be evaluated.</p></div>
<div class="listingblock">
<div class="content">
<pre><code>λ&gt; :eval t2</code></pre>
</div></div>
<div class="paragraph"><p><span class="image">
<img src="2.svg" alt="2.svg" width="471" height="204" />
</span></p></div>
<div class="paragraph"><p>The first element of <em>b</em> has been evaluated. We see that it&#8217;s a reference to
the value that&#8217;s also referenced in <em>a</em>, as they share the same name "b0". "S#
1" stands for the Integer data constructor, which is called <em>S#</em> in GHC and its
argument 1.</p></div>
<div class="paragraph"><p>Switch between the list view and the graph view:</p></div>
<div class="listingblock">
<div class="content">
<pre><code>λ&gt; :switch</code></pre>
</div></div>
<div class="paragraph"><p><span class="image">
<img src="3.svg" alt="3.svg" width="574" height="303" />
</span></p></div>
<div class="paragraph"><p>When an object is updated by accessing it, you have to call <code>:update</code> to
refresh the visualization window. You can also click on an object to force an
update:</p></div>
<div class="listingblock">
<div class="content">
<pre><code>λ&gt; a !! 2
3
λ&gt; :update</code></pre>
</div></div>
<div class="paragraph"><p><span class="image">
<img src="4.svg" alt="4.svg" width="467" height="470" />
</span></p></div>
<div class="paragraph"><p>Clear the visualization window, this also happens when you <code>:load</code> or
<code>:reload</code> a source file:</p></div>
<div class="listingblock">
<div class="content">
<pre><code>λ&gt; :clear</code></pre>
</div></div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_other_tools">Other Tools</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_print">:print</h3>
<div class="paragraph"><p>The GHCi Debugger has an integrated <code>:print</code> command that inspects data
structures at runtime. Evaluation is not forced, so there are no side effects.</p></div>
<div class="listingblock">
<div class="content">
<pre><code>$ ghci
GHCi, version 7.6.3: http://www.haskell.org/ghc/  :? for help
λ&gt; let a = [1..3]
λ&gt; :print a
a = (_t1::[Integer])
λ&gt; head a
1
λ&gt; :print a
a = 1 : (_t2::[Integer])
λ&gt; head $ tail a
2
λ&gt; :print a
a = 1 : 2 : (_t3::[Integer])
λ&gt; a
[1,2,3]
λ&gt; :print a
a = [1,2,3]
λ&gt; let b = a ++ a
λ&gt; head b
1
λ&gt; :print b
b = 1 : (_t3::[Integer])
λ&gt; b
[1,2,3,1,2,3]
λ&gt; :print b
b = [1,2,3,1,2,3]</code></pre>
</div></div>
<div class="paragraph"><p>These data structures reside on the GHC heap. We can see that expressions are
only evaluated once they are needed. This is called lazy evaluation. To avoid
unnecessary copies of objects on the heap a heap object can be referenced
multiple times instead of being copied into a new location. This is called
sharing. We can see that <code>:print</code> does not tell us how <em>b</em> is sharing values
with <em>a</em> or within itself.</p></div>
</div>
<div class="sect2">
<h3 id="_vacuum_cairo">vacuum-cairo</h3>
<div class="paragraph"><p>Vacuum-cairo on the other hand does tell us how values are shared within b:</p></div>
<div class="listingblock">
<div class="content">
<pre><code>λ&gt; System.Vacuum.Cairo.view b</code></pre>
</div></div>
<div class="paragraph"><p>The following window appears on the screen:</p></div>
<div class="paragraph"><p><span class="image">
<img src="vacuum1.png" alt="vacuum1.png" width="347" height="431" />
</span></p></div>
<div class="paragraph"><p>But vacuum-cairo evaluates the data structure fully before showing it. So we
can&#8217;t use it to see how data structures are lazily evaluated in Haskell.</p></div>
<div class="paragraph"><p>Additionally Vacuum-cairo is unable to visualize sharing between different
data structures, like <em>a</em> and <em>b</em> in this case, as only one data structure can
be viewed at any time. We would have to combine the data structures into one
to see which values are referenced in both.</p></div>
<div class="paragraph"><p>When we use vacuum (and vacuum-graphviz) directly we can inspect data
structures without evaluating them:</p></div>
<div class="listingblock">
<div class="content">
<pre><code>λ&gt; let a = "foo"
λ&gt; let b = a ++ a
λ&gt; head b
'f'
λ&gt; GHC.Vacuum.GraphViz.graphToDotFile "vacuum2" Data.GraphViz.Commands.Png $
   GHC.Vacuum.nameGraph (GHC.Vacuum.vacuumLazy (a,b))</code></pre>
</div></div>
<div class="paragraph"><p><span class="image">
<img src="vacuum2.png" alt="vacuum2.png" width="323" height="203" />
</span></p></div>
<div class="paragraph"><p>We can see that the value "C#l3" is referenced both in <em>a</em> and <em>b</em>. That&#8217;s the
<em>'f'</em>. What we can&#8217;t see is that the <em>l5</em> thunk references <em>a</em> and has another
value shared with <em>a</em>.</p></div>
<div class="paragraph"><p>What we&#8217;d like to see is something like this, which is what ghc-vis outputs:</p></div>
<div class="paragraph"><p><span class="image">
<img src="0.svg" alt="0.svg" width="203" height="367" />
</span></p></div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_more_examples">More Examples</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_fibonacci_numbers">Fibonacci Numbers</h3>
<div class="paragraph"><p>Let&#8217;s consider a function <em>f</em> that calculates fibonacci numbers:</p></div>
<div class="listingblock">
<div class="content">
<pre><code>λ&gt; let f = 0 : 1 : zipWith (+) f (tail f)
λ&gt; :switch
λ&gt; f !! 2
1
λ&gt; :view f
λ&gt; f !! 3
1
λ&gt; :update
λ&gt; f !! 4
2
λ&gt; :update</code></pre>
</div></div>
<div class="tableblock">
<table rules="none"
width="100%"
frame="void"
cellspacing="0" cellpadding="4">
<col width="33%" />
<col width="33%" />
<col width="33%" />
<tbody>
<tr>
<td align="left" valign="top"><p class="table">After <em>f !! 2</em>:</p></td>
<td align="left" valign="top"><p class="table">After <em>f !! 3</em>:</p></td>
<td align="left" valign="top"><p class="table">After <em>f !! 4</em>:</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table"><span class="image">
<img src="fib1.svg" alt="fib1.svg" width="228" height="343" />
</span></p></td>
<td align="left" valign="top"><p class="table"><span class="image">
<img src="fib2.svg" alt="fib2.svg" width="293" height="407" />
</span></p></td>
<td align="left" valign="top"><p class="table"><span class="image">
<img src="fib3.svg" alt="fib3.svg" width="358" height="470" />
</span></p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_interpreted_and_compiled_code">Interpreted and Compiled Code</h3>
<div class="paragraph"><p>Interpreted and compiled code may looks very different when evaluating. First
an example of interpreted code, <code>-fbyte-code</code> is the default in GHCi if the
code hasn&#8217;t been compiled already:</p></div>
<div class="listingblock">
<div class="content">
<pre><code>λ&gt; :set -fbyte-code
λ&gt; :!cat Sieve.hs
module Sieve where
primes = sieve [2..] where sieve (p:xs) = p : sieve [x | x &lt;- xs, x `mod` p &gt; 0]
λ&gt; :l Sieve
[1 of 1] Compiling Sieve            ( Sieve.hs, interpreted )
Ok, modules loaded: Sieve.
λ&gt; head primes
2
λ&gt; :switch
λ&gt; :view primes</code></pre>
</div></div>
<div class="paragraph"><p><span class="image">
<img src="interpreted.svg" alt="interpreted.svg" width="255" height="343" />
</span></p></div>
<div class="paragraph"><p>The view is rather confusing as a lot of type class information is included.
Let&#8217;s look at compiled object code:</p></div>
<div class="listingblock">
<div class="content">
<pre><code>λ&gt; :set -fobject-code
λ&gt; :l Sieve
[1 of 1] Compiling Sieve            ( Sieve.hs, Sieve.o )
Ok, modules loaded: Sieve.
λ&gt; head primes
2
λ&gt; :switch
λ&gt; :view primes</code></pre>
</div></div>
<div class="paragraph"><p><span class="image">
<img src="compiled.svg" alt="compiled.svg" width="255" height="343" />
</span></p></div>
</div>
<div class="sect2">
<h3 id="_simple_lists">Simple Lists</h3>
<div class="listingblock">
<div class="content">
<pre><code>λ&gt; let l = [1,2,3]
λ&gt; :view l
λ&gt; let l2 = 4:l
λ&gt; :view l2
λ&gt; let x = l ++ l2
λ&gt; :view x
λ&gt; let y = id (:) () y
λ&gt; :view y
λ&gt; :eval t1
λ&gt; :switch</code></pre>
</div></div>
<div class="tableblock">
<table rules="none"
width="100%"
frame="void"
cellspacing="0" cellpadding="4">
<col width="50%" />
<col width="50%" />
<tbody>
<tr>
<td align="left" valign="top"><p class="table"><span class="image">
<img src="5.svg" alt="5.svg" width="233" height="290" />
</span></p></td>
<td align="left" valign="top"><p class="table"><span class="image">
<img src="6.svg" alt="6.svg" width="290" height="517" />
</span></p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_binary_tree">Binary Tree</h3>
<div class="listingblock">
<div class="content">
<pre><code>λ&gt; data BinaryTree = BT BinaryTree Int BinaryTree | Leaf
λ&gt; let x = BT (BT (BT Leaf 1 (BT Leaf 2 Leaf)) 3 (BT (BT Leaf 4 (BT Leaf 5 Leaf)) 6 Leaf)) 7 Leaf
λ&gt; :view x
λ&gt; :switch</code></pre>
</div></div>
<div class="paragraph"><p><span class="image">
<img src="bt.svg" alt="bt.svg" width="480" height="407" />
</span></p></div>
</div>
<div class="sect2">
<h3 id="_double_linked_lists">Double Linked Lists</h3>
<div class="paragraph"><p>A working cyclic double linked list: <a href="dll.hs">dll.hs</a></p></div>
<div class="listingblock">
<div class="content">
<pre><code>λ&gt; :l dll.hs
λ&gt; let x = mkDList [1..4]
λ&gt; :view x
λ&gt; :switch</code></pre>
</div></div>
<div class="paragraph"><p><span class="image">
<img src="dll.svg" alt="dll.svg" width="321" height="343" />
</span></p></div>
<div class="paragraph"><p>A non-working cyclic double linked list: <a href="dll2.hs">dll2.hs</a> New list elements get
created all the time instead of referencing the existing ones.</p></div>
<div class="listingblock">
<div class="content">
<pre><code>λ&gt; :l dll2.hs
λ&gt; let x = mkDList [1..4]
λ&gt; :view x
λ&gt; :switch</code></pre>
</div></div>
<div class="paragraph"><p><span class="image">
<img src="dll2.svg" alt="dll2.svg" width="1691" height="813" />
</span></p></div>
</div>
<div class="sect2">
<h3 id="_deterministic_finite_automata">Deterministic Finite Automata</h3>
<div class="paragraph"><p><a href="dfa.hs">dfa.hs</a></p></div>
<div class="listingblock">
<div class="content">
<pre><code>λ&gt; :l dfa
λ&gt; :view dom18
λ&gt; :switch</code></pre>
</div></div>
<div class="paragraph"><p><span class="image">
<img src="dfa.svg" alt="dfa.svg" width="410" height="533" />
</span></p></div>
</div>
<div class="sect2">
<h3 id="_intmap">IntMap</h3>
<div class="listingblock">
<div class="content">
<pre><code>λ&gt; :view (Data.IntMap.fromList $ zip [1..10] [1..])
λ&gt; :eval t0
λ&gt; :switch</code></pre>
</div></div>
<div class="paragraph"><p><span class="image">
<img src="intmap.svg" alt="intmap.svg" width="988" height="407" />
</span></p></div>
</div>
<div class="sect2">
<h3 id="_bytestring">ByteString</h3>
<div class="listingblock">
<div class="content">
<pre><code>λ&gt; let a = Data.ByteString.pack [0x44,0x45,0x46]
λ&gt; :view a
λ&gt; let b = Data.ByteString.append a a
λ&gt; :view b
λ&gt; :switch
λ&gt; a
"DEF"
λ&gt; :update</code></pre>
</div></div>
<div class="paragraph"><p><span class="image">
<img src="bytestring.svg" alt="bytestring.svg" width="293" height="367" />
</span></p></div>
</div>
<div class="sect2">
<h3 id="_array">Array</h3>
<div class="listingblock">
<div class="content">
<pre><code>λ&gt; let b = GHC.Arr.array ((1,1),(3,2)) [((1,1),42),((1,2),23),((2,1),999),((2,2),1000),((3,1),1001),((3,2),1002)]
λ&gt; b
array ((1,1),(3,2)) [((1,1),42),((1,2),23),((2,1),999),((2,2),1000),((3,1),1001),((3,2),1002)]
λ&gt; :view b
λ&gt; :switch</code></pre>
</div></div>
<div class="paragraph"><p><span class="image">
<img src="array.svg" alt="array.svg" width="985" height="217" />
</span></p></div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_combined_with_ghci_8217_s_debugger">Combined with GHCi&#8217;s Debugger</h2>
<div class="sectionbody">
<div class="paragraph"><p>ghc-vis can be used to watch data structures while a computation is inspected
using GHCi&#8217;s debugger:</p></div>
<video width="640" height="480" controls>
  <source src="debugger.mp4" type="video/mp4" />
  <source src="debugger.webm" type="video/webm" />
  Your browser does not seem to support h264 or webm videos, please down the video below.
</video>
<div class="paragraph"><p><strong>Download Video:</strong> <a href="debugger.mp4">debugger.mp4</a>, <a href="debugger.webm">debugger.webm</a></p></div>
</div>
</div>
<div class="sect1">
<h2 id="_symbol_explanations_and_commands">Symbol Explanations and Commands</h2>
<div class="sectionbody">
<div class="paragraph"><p>These objects are used in GHCi:</p></div>
<div class="tableblock">
<table rules="rows"
width="100%"
frame="hsides"
cellspacing="0" cellpadding="4">
<col width="25%" />
<col width="25%" />
<col width="25%" />
<col width="25%" />
<thead>
<tr>
<th align="left" valign="top"> Name                </th>
<th align="left" valign="top"> Graph View </th>
<th align="left" valign="top"> List View </th>
<th align="left" valign="top"> Explanation</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p class="table">Thunk</p></td>
<td align="left" valign="top"><p class="table"><em>Thunk</em></p></td>
<td align="left" valign="top"><p class="table"><em>t0</em></p></td>
<td align="left" valign="top"><p class="table">Unevaluated value</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">General Application</p></td>
<td align="left" valign="top"><p class="table"><em>AP</em></p></td>
<td align="left" valign="top"><p class="table"><em>t0</em></p></td>
<td align="left" valign="top"><p class="table">Unevaluated value (mostly used in interpreted code)</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">Function</p></td>
<td align="left" valign="top"><p class="table"><em>Fun</em></p></td>
<td align="left" valign="top"><p class="table"><em>f0</em></p></td>
<td align="left" valign="top"><p class="table">Function applied to less parameters than it takes (possibly 0)</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">Partial Application</p></td>
<td align="left" valign="top"><p class="table"><em>PAP</em></p></td>
<td align="left" valign="top"><p class="table"><em>f0</em></p></td>
<td align="left" valign="top"><p class="table">Function applied to less parameters than it takes (mostly used in interpreted code)</p></td>
</tr>
</tbody>
</table>
</div>
<div class="paragraph"><p>Commands are executed on the GHCi command line:</p></div>
<div class="tableblock">
<table rules="rows"
width="100%"
frame="hsides"
cellspacing="0" cellpadding="4">
<col width="50%" />
<col width="50%" />
<thead>
<tr>
<th align="left" valign="top"> Command        </th>
<th align="left" valign="top"> Action</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p class="table"><code>:vis</code></p></td>
<td align="left" valign="top"><p class="table">Run the visualization window</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table"><code>:mvis</code></p></td>
<td align="left" valign="top"><p class="table">Run the minimal visualization window</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table"><code>:view x</code></p></td>
<td align="left" valign="top"><p class="table">Add the Haskell expression x to the visualization window</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table"><code>:eval t</code></p></td>
<td align="left" valign="top"><p class="table">Force evaluation to WHNF of the thunk named <em>t</em></p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table"><code>:switch</code></p></td>
<td align="left" valign="top"><p class="table">Switch between the visualization types (list, graph)</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table"><code>:update</code></p></td>
<td align="left" valign="top"><p class="table">Update the visualization window, in case an expression has changed</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table"><code>:clear</code></p></td>
<td align="left" valign="top"><p class="table">Remove all visualized expressions</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table"><code>:restore</code></p></td>
<td align="left" valign="top"><p class="table">Restore all hidden nodes</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table"><code>:timeback</code></p></td>
<td align="left" valign="top"><p class="table">Go back in history</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table"><code>:timeforward</code></p></td>
<td align="left" valign="top"><p class="table">Go forward in history</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table"><code>:export file</code></p></td>
<td align="left" valign="top"><p class="table">Export the current visualization to a file; SVG, PDF, PS and PNG supported</p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_key_and_mouse_bindings">Key and Mouse Bindings</h2>
<div class="sectionbody">
<div class="paragraph"><p>Key and mouse bindings work in the visualization window:</p></div>
<div class="tableblock">
<table rules="rows"
width="100%"
frame="hsides"
cellspacing="0" cellpadding="4">
<col width="10%" />
<col width="10%" />
<col width="10%" />
<col width="30%" />
<col width="40%" />
<thead>
<tr>
<th colspan="3" align="left" valign="top"> Keys </th>
<th align="left" valign="top"> Mouse </th>
<th align="left" valign="top"> Action</th>
</tr>
</thead>
<tbody>
<tr>
<td colspan="3" align="left" valign="top"><p class="table">v</p></td>
<td align="left" valign="top"><p class="table"></p></td>
<td align="left" valign="top"><p class="table">Switch view</p></td>
</tr>
<tr>
<td colspan="3" align="left" valign="top"><p class="table">c</p></td>
<td align="left" valign="top"><p class="table"></p></td>
<td align="left" valign="top"><p class="table">Clear view</p></td>
</tr>
<tr>
<td colspan="3" align="left" valign="top"><p class="table">C</p></td>
<td align="left" valign="top"><p class="table"></p></td>
<td align="left" valign="top"><p class="table">Restore hidden nodes</p></td>
</tr>
<tr>
<td colspan="3" align="left" valign="top"><p class="table">u</p></td>
<td align="left" valign="top"><p class="table"></p></td>
<td align="left" valign="top"><p class="table">Update view</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">Enter,</p></td>
<td colspan="2" align="left" valign="top"><p class="table">Space,</p></td>
<td align="left" valign="top"><p class="table">Left click</p></td>
<td align="left" valign="top"><p class="table">Evaluate and update</p></td>
</tr>
<tr>
<td colspan="3" align="left" valign="top"><p class="table">,</p></td>
<td align="left" valign="top"><p class="table"></p></td>
<td align="left" valign="top"><p class="table">Go back in history</p></td>
</tr>
<tr>
<td colspan="3" align="left" valign="top"><p class="table">.</p></td>
<td align="left" valign="top"><p class="table"></p></td>
<td align="left" valign="top"><p class="table">Go forward in history</p></td>
</tr>
<tr>
<td colspan="3" align="left" valign="top"><p class="table"></p></td>
<td align="left" valign="top"><p class="table">Right click and drag</p></td>
<td align="left" valign="top"><p class="table">Move</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">Left,</p></td>
<td align="left" valign="top"><p class="table">h,</p></td>
<td align="left" valign="top"><p class="table">a</p></td>
<td align="left" valign="top"><p class="table"></p></td>
<td align="left" valign="top"><p class="table">Move left</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table"></p></td>
<td align="left" valign="top"><p class="table">H,</p></td>
<td align="left" valign="top"><p class="table">A</p></td>
<td align="left" valign="top"><p class="table"></p></td>
<td align="left" valign="top"><p class="table">Move left fast</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">Right,</p></td>
<td align="left" valign="top"><p class="table">l,</p></td>
<td align="left" valign="top"><p class="table">d</p></td>
<td align="left" valign="top"><p class="table"></p></td>
<td align="left" valign="top"><p class="table">Move right</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table"></p></td>
<td align="left" valign="top"><p class="table">L,</p></td>
<td align="left" valign="top"><p class="table">D</p></td>
<td align="left" valign="top"><p class="table"></p></td>
<td align="left" valign="top"><p class="table">Move right fast</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">Up,</p></td>
<td align="left" valign="top"><p class="table">k,</p></td>
<td align="left" valign="top"><p class="table">w</p></td>
<td align="left" valign="top"><p class="table"></p></td>
<td align="left" valign="top"><p class="table">Move up</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table"></p></td>
<td align="left" valign="top"><p class="table">K,</p></td>
<td align="left" valign="top"><p class="table">W</p></td>
<td align="left" valign="top"><p class="table"></p></td>
<td align="left" valign="top"><p class="table">Move up fast</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">Down,</p></td>
<td align="left" valign="top"><p class="table">j,</p></td>
<td align="left" valign="top"><p class="table">s</p></td>
<td align="left" valign="top"><p class="table"></p></td>
<td align="left" valign="top"><p class="table">Move down</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table"></p></td>
<td align="left" valign="top"><p class="table">J,</p></td>
<td align="left" valign="top"><p class="table">S</p></td>
<td align="left" valign="top"><p class="table"></p></td>
<td align="left" valign="top"><p class="table">Move down fast</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">\+,</p></td>
<td colspan="2" align="left" valign="top"><p class="table">PageUp</p></td>
<td align="left" valign="top"><p class="table">Wheel up</p></td>
<td align="left" valign="top"><p class="table">Zoom in</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">-,</p></td>
<td colspan="2" align="left" valign="top"><p class="table">PageDown</p></td>
<td align="left" valign="top"><p class="table">Wheel down</p></td>
<td align="left" valign="top"><p class="table">Zoom out</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">0,</p></td>
<td colspan="2" align="left" valign="top"><p class="table">=</p></td>
<td align="left" valign="top"><p class="table">Wheel click</p></td>
<td align="left" valign="top"><p class="table">Reset zoom and position</p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_using_ghc_vis_as_a_library">Using ghc-vis as a Library</h2>
<div class="sectionbody">
<div class="paragraph"><p>Although ghc-vis is meant to be used in GHCi it can also be used as a library
in regular Haskell programs which are run or compiled by GHC. You can run
those programs using <code>runghc example.hs</code> or <code>ghc -threaded example.hs &amp;&amp;
./example</code>. Without the <code>-threaded</code>-Flag ghc-vis does not work correctly. This
is an example using ghc-vis outside of GHCi:</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 3.1.7
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt><span style="font-weight: bold"><span style="color: #0000FF">import</span></span> GHC<span style="color: #990000">.</span><span style="color: #009900">Vis</span>

main <span style="color: #990000">=</span> <span style="font-weight: bold"><span style="color: #0000FF">do</span></span>
  <span style="font-weight: bold"><span style="color: #0000FF">let</span></span> a <span style="color: #990000">=</span> <span style="color: #FF0000">"teeest"</span>
  <span style="font-weight: bold"><span style="color: #0000FF">let</span></span> b <span style="color: #990000">=</span> <span style="color: #990000">[</span><span style="color: #993399">1</span><span style="color: #990000">..</span><span style="color: #993399">3</span><span style="color: #990000">]</span>
  <span style="font-weight: bold"><span style="color: #0000FF">let</span></span> c <span style="color: #990000">=</span> b <span style="color: #990000">++</span> b
  <span style="font-weight: bold"><span style="color: #0000FF">let</span></span> d <span style="color: #990000">=</span> <span style="color: #990000">[</span><span style="color: #993399">1</span><span style="color: #990000">..]</span>
  putStrLn <span style="color: #990000">$</span> show <span style="color: #990000">$</span> d <span style="color: #990000">!!</span> <span style="color: #993399">1</span>

  vis
  view a <span style="color: #FF0000">"a"</span>
  view b <span style="color: #FF0000">"b"</span>
  view c <span style="color: #FF0000">"c"</span>
  view d <span style="color: #FF0000">"d"</span>

  getChar
  switch

  getChar</tt></pre></div></div>
</div>
</div>
<div class="sect1">
<h2 id="_thesis">Thesis</h2>
<div class="sectionbody">
<div class="paragraph"><p>ghc-vis was developed as part of my Bachelor Thesis titled
<a href="thesis">Visualization of Lazy Evaluation and Sharing</a>. It contains some
more examples, explains how it works and what kind of problems I encountered.</p></div>
</div>
</div>
<div class="sect1">
<h2 id="_bugs_feature_requests_development">Bugs, Feature Requests, Development</h2>
<div class="sectionbody">
<div class="paragraph"><p>If you have any problems, new ideas or comments concerning ghc-vis, just drop
me an email. I&#8217;ll be glad to help you.</p></div>
</div>
</div>
</div>
<div id="footnotes"><hr /></div>
<div id="footer">
<div id="footer-text">
Last updated 2013-06-07 08:26:30 CEST
</div>
</div>
</body>
</html>
